/**
MORTAR.JS
http://tom-alexander.github.com/mortar-js

copyright(c) 2013 Tom Alexander
Licensed under the MIT license.
**/
(function(e){e.fn.mortar=function(t,n){var r={columns:3,rows:null,filter:"mortar-all",duration:500};var t=e.extend(r,t);return this.each(function(){var r=e(this),i=[],s=0,o=r.children().length;r.css("position","relative");r.children().css("position","absolute").addClass("mortar-all").each(function(){if(!e(this).hasClass(t.filter)){e(this).fadeOut();o--}else e(this).fadeIn()}).promise().done(function(){t.rows&&t.columns?t.rows=null:t.rows?t.columns=o/t.rows:t.rows=o/t.columns;for(var u=0;u<t.rows;u++){for(var a=0;a<t.columns;a++){i.push({x:a,y:u})}}r.children().each(function(){if(!e(this).is(":hidden")){e(this).animate({left:e(this).outerWidth(true)*i[s].x,top:e(this).outerHeight(true)*i[s].y},t.duration);s++}});typeof n=="function"?n.call():false})})}})(jQuery)